# 選挙シミュレータ　仕様書

## 目的
- 無投票者の行動をランダムに変化させ、投票結果にどの程度影響するのかを調査する。
- 条件は簡素化する。

## シミュレーション内容の概略
- 候補者はAとBの二者とし、Aが前回勝利者とする。
- 前回A, B以外に投票した、あるいは無投票だった者がランダム割合でA, Bに投票する。
- 前回A, Bに投票したもののうち、一部がランダム割合で離反して逆サイドに投票する。
- 前回A, Bに投票したものは、次は無投票には転じない。

## 処理の流れ
1. 入力CSVを読み取り、初期得票率とランダムパラメータ範囲を取得
2. 試行回数分、乱数を生成して投票率を再計算
3. 各回の結果（得票率、逆転判定など）を記録
4. 最終的にB勝率および収束曲線を出力

## バリデーションチェック
- 初期得票率の合計が1.0（100%）前後であることを確認。不正ならエラー終了
- 各ランダムパラメータ（voteratio等）が 0〜1 の範囲に収まっており、min ≤ max であることをチェック

## 出力結果
- B勝率
- 収束曲線（各試行終了時点での勝率を算出、その推移をグラフ化。）
  - output/convergence_curve.png
- 全試行のパラメータと結果リスト
  - output/result.csv

## result.csvデータ構造

| voteratio | NtoA_ratio | NtoB_ratio | AtoB_ratio | BtoA_ratio | A得票率   | B得票率   | 逆転  | 投票率      |
|-----------|------------|------------|------------|------------|----------|----------|------|------------|
| 45        | 30         | 70         | 5          | 3          | 42.2     | 57.8     | 1    | 80.5       |
| 50        | 25         | 75         | 2          | 4          | 50.1     | 49.9     | 0    | 72.5       |
| ...       | ...        | ...        | ...        | ...        | ...      | ...      | ...  | ...        |

## 使用上の注意
- 初期値は全てパーセント単位で入力する。
- 同率はA勝利とする。
- numpyの `np.random.uniform()` を使用する。
- ランダム試行のため再現性はなく、また確率が収束する（一定の値に落ち着く）までに十分な回数の施行が必要。
- GUI対応は行わない。大変そうなので。

## フォルダ構成
no-vote-impact/　<br>
├── data/                # 入力CSVや定義ファイル <br>
│   └── initial_condition.csv <br>
│   └── random_ranges.csv <br>
├── output/              # 結果CSVやグラフ画像 <br>
│   └── convergence_curve.png <br>
│   └── result.csv <br>
├── src/                 # ソースコード <br>
│   ├── simulator.py <br>
├── Condition_Design.md  # モデル仕様書（本ファイル） <br>
└── README.md            # プロジェクト説明 <br>